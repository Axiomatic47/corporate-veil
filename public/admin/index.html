<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
  <link href="/admin/styles/preview.css" rel="stylesheet" />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    CMS.registerPreviewStyle('/admin/styles/preview.css');
    
    const PreviewTemplate = createClass({
      render: function() {
        const {entry} = this.props;
        const title = entry.getIn(['data', 'title']);
        const description = entry.getIn(['data', 'description']);
        const collectionType = entry.getIn(['data', 'collection_type']);
        const section = entry.getIn(['data', 'section']);
        const body = this.props.widgetFor('body');

        return h('div', {className: 'preview-container'},
          h('h1', {className: 'text-4xl font-bold mb-4'}, title),
          h('div', {className: 'meta-info mb-6'},
            h('p', {className: 'text-lg mb-2'}, description),
            h('div', {className: 'flex gap-4'},
              h('span', {className: 'text-sm'}, `Collection: ${collectionType}`),
              h('span', {className: 'text-sm'}, `Section: ${section}`)
            )
          ),
          h('div', {className: 'content mt-8'}, body)
        );
      }
    });

    CMS.registerPreviewTemplate('compositions', PreviewTemplate);
  </script>
</body>
</html>